<!DOCTYPE html>
<html>

<head>
    <title>Reshimot - Controle de personagens para RPG</title>
    <link rel="stylesheet" href="stylesheet.css" />
    <link rel="icon" type="image/x-icon" href="logo.png" />
</head>

<body>

    <!-- sessão de componentes -->
    <div class="components hidden">

        <canvas id="canvas"></canvas>
        <input type="file" id="uploaderImage" accept="image/*" onchange="processarImagem(event)" />
        <input type="file" id="uploaderJson" accept=".json" onchange="processarJson(event)" />

        <!-- ficha base -->
        <div id="fichaBase">
            <div class="inner" ondblclick="abrirForm('?=id', this)">
                <div class="cabecalho">
                    <div class="ordem">
                        ?=ordem
                    </div>
                    <div class="menu" onclick="abrirContexto('?=id', 'ficha', this)"></div>
                </div>
                <div class="foto">
                    <img src="default.png" />
                </div>
                <div class="nome" data-id="?=id" data-campo="nome">
                    ?=nome
                </div>
                <div class="numeros">
                    <div class="grupo">
                        <label>Iniciativa:</label>
                        <input type="text" inputmode="numeric" class="numero iniciativa" data-id="?=id"
                            data-campo="iniciativa" value="?=iniciativa" onchange="edit('?=id')" />
                    </div>
                    <div class="grupo">
                        <label>Iniciativa extra:</label>
                        <input type="text" inputmode="numeric" class="numero extra" data-id="?=id" data-campo="extra"
                            value="?=extra" onchange="edit('?=id')" />
                    </div>
                    <div class="grupo">
                        <label>Vida (HP):</label>
                        <input type="text" inputmode="numeric" class="numero vida" data-id="?=id" data-campo="vida"
                            value="?=vida" onchange="edit('?=id')" />
                    </div>
                    <div class="grupo">
                        <label>Armadura (CA):</label>
                        <input type="text" inputmode="numeric" class="numero armadura" data-id="?=id"
                            data-campo="armadura" value="?=armadura" onchange="edit('?=id')" />
                    </div>
                </div>
            </div>
        </div>

        <!-- formulario base -->
        <div id="formBase">
            <div class="interno">
                <div class="esquerda">
                    <h2>Ficha de personagem</h2>
                </div>
                <div class="direita">
                    <div class="foto">
                        <input type="hidden" data-id="?=id" data-campo="imagem" />
                        <img src="default.png" onclick="abrirFormularioImagem()" />
                    </div>
                </div>
                <div class="esquerda">
                    <div class="grupo">
                        <label>Nome:</label>
                        <input type="text" data-id="?=id" data-campo="nome" />
                    </div>
                    <div class="anotacao">
                        <label>Anotações</label>
                        <textarea data-id="?=id" data-campo="anotacao"></textarea>
                    </div>
                </div>
                <div class="direita" style="padding-top: 51px;">

                    <input type="hidden" data-id="?=id" data-campo="idFicha" />

                    <div class="grupo">
                        <label>Iniciativa:</label>
                        <input type="text" data-id="?=id" data-campo="iniciativa" />
                    </div>

                    <div class="grupo">
                        <label>Iniciativa Extra:</label>
                        <input type="text" data-id="?=id" data-campo="extra" />
                    </div>

                    <div class="grupo">
                        <label>Pontos de Vida:</label>
                        <input type="text" data-id="?=id" data-campo="vida" />
                    </div>

                    <div class="grupo">
                        <label>Pontos de Armadura:</label>
                        <input type="text" data-id="?=id" data-campo="armadura" />
                    </div>

                    <div class="grupo">
                        <label>Alinhamento:</label>
                        <select data-id="?=id" data-campo="alinhamento">
                            <option selected value="neutro">Neutro</option>
                            <option value="bom">Bom</option>
                            <option value="mau">Mau</option>
                        </select>
                    </div>
                </div>
                <div class="botoes">
                    <button onclick="confirmar()" class="confirmar">Confirmar</button>
                    <button onclick="removerFormulario()" class="cancelar">Cancelar</button>
                </div>
            </div>
        </div>

        <div id="formImagem">
            <div class="interno">
                <h3>Escolha uma imagem:</h3>

                <div class="listaImagem">
                    <span onclick="importarImagem()" id="?=addImage">
                        <img src="svg/upload.svg" />
                    </span>
                </div>

                <div class="botoes">
                    <button onclick="removerFormularioImagem()" class="cancelar">Cancelar</button>
                </div>
            </div>
        </div>

        <!-- menu de contexto base -->
        <div id="contextoBase">
            <ul>
            </ul>
        </div>
    </div>

    <!-- parte visivel da tela -->

    <div class="nav">
        <div class="logo" title="Reshimot"><img src="logo.png" /></div>
        <div class="acoes">
            <button onclick="exportar()" title="Exportar sessão"><img src="svg/export.svg"></button>
            <button onclick="exportar(true)" title="Exportar marcados"><img src="svg/export.svg"></button>
            <button onclick="importarSessao()" title="Importar sessão"><img src="svg/upload.svg"></button>
            <button onclick="trocarSessao()" title="Trocar de sessão"><img src="svg/settings.svg"></button>
        </div>
    </div>

    <div class="container">
        <div id="fichas">
            <div id="add" onclick="add()">
                +
            </div>
        </div>
    </div>

    <span class="versao">Projeto Reshimot - v1.4 ALPHA</span>
</body>
<script src="imglib.js"></script>
<script src="main.js"></script>

</html>